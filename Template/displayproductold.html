
<style type="text/css">
    .gap{
         margin-top:20px;
         }
    .myframe{
         width:600px;
         padding:20px;
         background-color: #fff;
         border-radius:10px;
         }
    .root{
         display:flex;
         justify-content:center;
         align-items:center;
         margin-top:20px;
         background-color: #D6A2E8;
         padding: 20px;
         }
    .btnstyle{
            display:flex;
            justify-content:center;
            align-items:center;
            }
</style>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Display product</title>
</head>
<link rel = "stylesheet" href = "https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="/static/javascript/subcategory.js"></script>
<body>
<div class="root" style="display: flex;justify-content: center;align-items: center;
  background-color: #dfe6e9;padding: 20px;">
    <div class="myframe" style="width: 90%;
  background-color: #fffefd;
  padding: 20px;
  border-radius: 30px;">
        <div class="row" style="margin-bottom:10px;font-weight:bold;font-size:16px;letter-spacing:5;">
            <img src="/static/productlogo.jpg" width="20"/>
                List Of Products
        </div>
        <table class="table">
            <thead>
              <tr>
                  <th>category ID</th>
                  <th >Subcategory ID</th>
                  <th >Product ID</th>
                  <th >Product Name</th>
                  <th > Product <br> Discription</th>
                  <th >Icon</th>
                  <th >Update</th>
              </tr>
            </thead>
         <tbody>
             {% for row in rows%}
             <tr>
                 <td>{{row.0}}<br>{{row.6}}</td>
                 <td >{{row.1}}<br>{{row.7}}</td>
                 <th scope="row">{{row.2}}</th>
                 <td>{{row.3}}</td>
                 <td>{{row.4}}</td>
                 <td><a href="editproducticon?productid={{row.2}}&productname={{row.3}}&producticon={{row.5}}"><img src="/static/{{row.5}}" width="40"></a></td>
                 <td><a class = "button is-primary modal-button" data="{{row}}" data-target = "#modal" >Edit/Delete</a></td>
             </tr>
             {% endfor %}
             </tbody>
             </table>
             </div>
</div>
</body>

<div id = "modal" class = "modal">
    <div class = "modal-background"></div>
    <div class = "modal-content" style="width:50%;background-color: #fff;padding:50px;">

        <body>
<form action="/editdeleteproduct" >
    <input type="hidden"  value="{{row.2}}" id="productid" name="productid"/>
<div class="root">
<div class="myframe">
    <div class="row" style=" display:flex;align-items:center;font-size:16px;letter-spacing:2px;font-weight:bold;margin-bottom:10px;padding-left:15px;padding-right:15px">
        <img src="/static/productlogo.jpg" width="30"/>
        Product
    </div>

    <div class="row gap ">
        <select id="categoryid" name="categoryid" class="form-control">

        </select>
   </div>

    <div class="row gap">
        <select id="subcategoryid" name="subcategoryid" class="form-control">

        </select>
    </div>

    <div class="row gap">
        <input type="text" value="{{row.3}}" id="productname" name="PRODUCTNAME" class="form-control" placeholder="Name of Product">
    </div>

    <div class="row gap">
        <input type="text" value="{{row.4}}" id="pdiscription" name="PDISCRIPTION"  class="form-control" placeholder="Product Discription">
    </div>

    <div class="row gap" style="display:flex;align-items:center;justify-content:center;">
           &nbsp;  <img src="/static/{{row.5}}" id="producticon" width="100"/>
         </div>



        <div class="row gap">
               <div class="col btnstyle " >
        <button type="submit" name="btn" value="edit" class="btn btn-primary w-100" >Edit</button>
               </div>

               <div class="col btnstyle">
         <button type="submit" name="btn" value="delete" class="btn btn-primary w-100" >Delete</button>
               </div>
        </div>
        <div class="row gap ">
            <div class="col btnstyle" style="font-weight:bold;font-size:20px;margin-top:10px">
                {{msg}}
            </div>

        </div>
</div>

</div>

</form>

</body>


               </div>

<button class = "modal-close is-large" aria-label = "close"></button></div>
<script>



 function setdata(data)
               {
                           data=data.replace("(","")
			               data=data.replace(")","")
			               data=data.replaceAll("'","")
			               data=data.split(",")
			              return data
			              }

                           $(".modal-button").click(function(){
                           var target = $(this).data("target");
			               var data=$(this).attr('data')
			               data=setdata(data)
			                $('#productid').val(data[2].trim())
			               $('#categoryid').val(data[0].trim())

			               $('#subcategoryid').append($('<option>').text(data[7]).val(data[1]))

			               $('#productname').val(data[3].trim())
			               $('#pdiscription').val(data[4].trim())
                           $('#producticon').attr('src','/static/'+(data[5].trim()))

			               $("html").addClass("is-clipped");
			               $(target).addClass("is-active");
			            });

			            $(".modal-close").click(function() {
			               $("html").removeClass("is-clipped");
			               $(this).parent().removeClass("is-active");
			            });







</script>
             </html>
